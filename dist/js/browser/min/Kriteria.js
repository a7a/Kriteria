!function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var h=n[a]={exports:{}};e[a][0].call(h.exports,function(t){var n=e[a][1][t];return i(n?n:t)},h,h.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e,n){!function(e,n){"use strict";var r=t("./lib/getProperty.js").getProperty,i=t("./lib/matchPrefix.js").matchPrefix,o=t("./lib/Condition.js").Condition,a=t("./lib/evaluation.js").evaluation,s=function(){this._conditionAnd=[],this._conditionOr=[],this._not_flg=!1};s._name_="Kriteria",s.prototype.getConditionAnd=function(){return this._conditionAnd},s.prototype.getConditionOr=function(){return this._conditionOr},s._JS_OPERATOR={eq:"===",ne:"!==",lt:"<",le:"<=",gt:">",ge:">="},s.prototype.addAnd=function(t){this._conditionAnd[this._conditionAnd.length]=t},s.prototype.addOr=function(t){this._conditionOr[this._conditionOr.length]=t},s.prototype.and=function(t){var e=typeof t,n=null;if("string"===e||t instanceof String||"number"===e||t instanceof Number)return a("and",t,this);if(t instanceof s)return n=t,this.addAnd(new o("","",[],"",n)),this;if("function"==typeof t)return n=new s,t(n),this.addAnd(new o("","",[],"",n)),this;throw new Error("invalid type of argument. ("+e+")")},s.prototype.or=function(t){var e=typeof t,n=null;if("string"===e||t instanceof String||"number"===e||t instanceof Number)return a("or",t,this);if(t instanceof s)return n=t,this.addOr(new o("","",[],"",n)),this;if("function"==typeof t)return n=new s,t(n),this.addOr(new o("","",[],"",n)),this;throw new Error("invalid type of argument. ("+e+")")},s.prototype.not=function(){return this._not_flg=!this._not_flg,this},s.parse=function(t){var e=new s,n="";for(n in t.and)e.addAnd(t.and[n]);for(n in t.or)e.andOr(t.or[n]);return t.not&&e.not(),e},s.prototype.match=function(t){var e=0,n=0,i=0,o=0,a="",l="",u=[],h="",f=null,c=[],_=!1,y=null,d=null;for(e=0,n=this._conditionAnd.length;n>e;e+=1)if(y=this._conditionAnd[e],y.criteria instanceof s){if(_=y.criteria.match(t),!_)break}else{if(a=y.left_key,l=y.operator,u=y.right_key,h=y.key_type,f=r(t,a),"value"===h)c=u;else if("key"===h)if(d=r(t,u[0]),Array.isArray(d))if("match"===l||"not_match"===l)for(c=[],i=0,o=d.length;o>i;i+=1)null===d[i]||void 0===d[i]||""===d[i]?c[i]=d[i]:c[i]=new RegExp(d[i]);else c=d;else c="match"===l||"not_match"===l?null===d||void 0===d||""===d?d:[new RegExp(d)]:[d];if(_=void 0===c||~c.indexOf(void 0)||void 0===f?!1:this._compare(f,l,c),!_)break}if(_)return!!(!0^this._not_flg);for(e=0,n=this._conditionOr.length;n>e;e+=1)if(y=this._conditionOr[e],y.criteria instanceof s){if(_=y.criteria.match(t))return!!(!0^this._not_flg)}else{if(a=y.left_key,l=y.operator,u=y.right_key,h=y.key_type,f=r(t,a),"value"===h)c=u;else if("key"===h)if(d=r(t,u[0]),Array.isArray(d))if("match"===l||"not_match"===l)for(c=[],i=0,o=d.length;o>i;i+=1)null===d[i]||void 0===d[i]||""===d[i]?c[i]=d[i]:c[i]=new RegExp(d[i]);else c=d;else c="match"===l||"not_match"===l?null===d||void 0===d||""!==d?d:[new RegExp(d)]:[d];if(_=void 0===c||~c.indexOf(void 0)||void 0===f?!1:this._compare(f,l,c))return!!(!0^this._not_flg)}return!!(!1^this._not_flg)},s.prototype._compare=function(t,e,n){var r=!1;switch(e){case"eq":r=n[0]===t;break;case"ne":r=n[0]!==t;break;case"lt":r=n[0]>t;break;case"le":r=n[0]>=t;break;case"gt":r=n[0]<t;break;case"ge":r=n[0]<=t;break;case"in":r=!!~n.indexOf(t);break;case"not_in":r=!~n.indexOf(t);break;case"between":r=n[0]<=t&&n[1]>=t;break;case"not_between":r=n[0]>t||n[1]<t;break;case"match":r=null===n[0]?null===t||void 0===t?!0:!1:null===t?!1:""===n[0]?""===t?!0:!1:n[0].test(t);break;case"not_match":r=null===n[0]?null===t||void 0===t?!1:!0:null===t?!0:""===n[0]?""===t?!1:!0:!n[0].test(t)}return r},s.prototype.matcher=function(){return new Function("$","return "+this._createMatchingExpression())},s.prototype._createMatchingExpression=function(){var t=0,e=0,n=[],r=[],i="",o="",a=null,l="";for(t=0,e=this._conditionAnd.length;e>t;t+=1)a=this._conditionAnd[t],a.criteria instanceof s?n[n.length]="("+a.criteria._createMatchingExpression()+")":n[n.length]=this._createExpression(a);for(t=0,e=this._conditionOr.length;e>t;t+=1)a=this._conditionOr[t],a.criteria instanceof s?r[r.length]="("+a.criteria._createMatchingExpression()+")":r[r.length]=this._createExpression(a);return i=n.join(" && "),o=r.join(" || "),i&&o?l=i+" || "+o+" ":o?i||(l=o):l=i,this._not_flg&&(l="!("+l+")"),l},s.prototype._createExpression=function(t){return"("+this._createJsExpressionOfKeyIsNotUndefined(t.left_key)+" && "+("key"===t.key_type?this._createJsExpressionOfKeyIsNotUndefined(t.right_key[0])+" && ":"")+this._createJsExpression(t)+")"},s.prototype._createJsExpression=function(t){var e="$."+t.left_key,n=t.operator,r=t.right_key,i=t.key_type,o=s._JS_OPERATOR[n];return o?e+" "+o+" "+this._toStringExpressionFromValue(r[0],i):"in"===n?"value"===i?"!!~"+this._toStringExpressionFromArray(r)+".indexOf("+e+")":"(Array.isArray($."+r[0]+") ? !!~$."+r[0]+".indexOf("+e+"): $."+r[0]+" === "+e+")":"not_in"===n?"value"===i?"!~"+this._toStringExpressionFromArray(r)+".indexOf("+e+")":"(Array.isArray($."+r[0]+") ? !~$."+r[0]+".indexOf("+e+"): $."+r[0]+" !== "+e+")":"between"===n?e+" >= "+this._toStringExpressionFromValue(r[0],i)+" && "+e+" <= "+this._toStringExpressionFromValue(r[1],i):"not_between"===n?e+" < "+this._toStringExpressionFromValue(r[0],i)+" || "+e+" > "+this._toStringExpressionFromValue(r[1],i):"match"===n?void 0===r[0]?!1:null===r[0]?"("+e+" === null ? true : false)":""===r[0]?"("+e+" === '' ? true : false)":"("+r[0]+".test("+e+"))":"not_match"===n?void 0===r[0]?!1:null===r[0]?"("+e+" === null ? false : true)":""===r[0]?"("+e+" === '' ? false : true)":"(!"+r[0]+".test("+e+"))":null},s.prototype._createJsExpressionOfKeyIsNotUndefined=function(t){for(var e=t.split("."),n=[],r=[],i=0,o=e.length;o>i;i+=1)n[n.length]=e[i],r[r.length]="$."+n.join(".")+" !== void 0";return r.join(" && ")},s.prototype._createJSExpressionOfKeyIsUndefined=function(t){for(var e=t.split("."),n=[],r=[],i=0,o=e.length;o>i;i+=1)n[n.length]=e[i],r[r.length]="$."+n.join(".")+" === void 0",r[r.length]="$."+n.join(".")+" === null";return r.join(" || ")},s.prototype._toStringExpressionFromArray=function(t){for(var e=[],n=0,r=t.length;r>n;n+=1)e[e.length]=this._toStringExpressionFromValue(t[n],"value");return"["+e.join(", ")+"]"},s.prototype._toStringExpressionFromValue=function(t,e){return"value"===e&&("string"==typeof t||t instanceof String)?'"'+t+'"':"key"===e?"$."+t:t+""},s.prototype.splitByKeyPrefixes=function(t){if(!Array.isArray(t)||0===t.length)return null;var e={},n=null,r=null,o=[],a="",l="",u="",h=!0,f=!0,c=!0,_="",y=0,d=0,g=0,p=0;for(y=0,d=t.length;d>y;y+=1)e[t[y]]=new s;for(e["else"]=new s,y=0,d=this._conditionAnd.length;d>y;y+=1)if(n=this._conditionAnd[y],n.criteria instanceof s){r=n.criteria.splitByKeyPrefixes(t);for(_ in r)null!==r[_]&&e[_].and(r[_])}else{for(o=[],a=n.left_key,l=n.right_key[0],u=n.key_type,c=!1,g=0,p=t.length;p>g;g+=1)if(o[o.length]=t[g],h=i(a,o),"key"===u&&(f=i(l,o)),"value"===u&&h||"key"===u&&h&&f){e[t[g]].addAnd(n),c=!0;break}c||e["else"].addAnd(n)}for(y=0,d=this._conditionOr.length;d>y;y+=1)if(n=this._conditionOr[y],n.criteria instanceof s){r=n.criteria.splitByKeyPrefixes(t);for(_ in r)null!==r[_]&&e[_].or(r[_])}else{for(o=[],a=n.left_key,l=n.right_key[0],u=n.key_type,c=!1,g=0,p=t.length;p>g;g+=1)if(o[o.length]=t[g],h=i(a,o),"key"===u&&(f=i(l,o)),"value"===u&&h||"key"===u&&h&&f){e[t[g]].addOr(n),c=!0;break}c||e["else"].addOr(n)}for(_ in e)e[_].getConditionAnd().length>0||e[_].getConditionOr().length>0?e[_]._not_flg=this._not_flg:e[_]=null;return e},s.prototype.merge=function(t,e){var n=new s,r=t.getConditionAnd(),i=t.getConditionOr(),o=null,a=!1,l=0,u=0,h=0,f=0;if(this._not_flg!==t._not_flg)throw new Error("Kriteria#merge - collision to not flag.");for(l=0,u=this._conditionAnd.length;u>l;l+=1)n.addAnd(this._conditionAnd[l]);for(l=0,u=this._conditionOr.length;u>l;l+=1)n.addOr(this._conditionOr[l]);if(e){for(l=0,u=r.length;u>l;l+=1){for(o=r[l],a=!1,h=0,f=this._conditionAnd.length;f>h;h+=1)if(0===o.compareTo(this._conditionAnd[h])){a=!0;break}a||n.addAnd(o)}for(l=0,u=i.length;u>l;l+=1){for(o=i[l],a=!1,h=0,f=this._conditionOr.length;f>h;h+=1)if(0===o.compareTo(this._conditionOr[h])){a=!0;break}a||n.addOr(o)}}else{for(l=0,u=r.length;u>l;l+=1)n.addAnd(r[l]);for(l=0,u=i.length;u>l;l+=1)n.addOr(i[l])}return n},s.prototype.compareTo=function(t){var e=function(t,e){return t.compareTo(e)},n=t.getConditionAnd(),r=t.getConditionOr(),i=null,o=null,a=!0,s=0,l=0,u=0,h=0;if(this._conditionAnd.sort(e),n.sort(e),this._conditionOr.sort(e),r.sort(e),this._not_flg&&!t._not_flg)return-1;if(!this._not_flg&&t._not_flg)return 1;for(s=this._conditionAnd.length,l=n.length,h=s>l?s:l,u=0;h>u;u+=1){if(i=this._conditionAnd[u],o=n[u],!i)return-1;if(!o)return 1;if(a=i.compareTo(o),0!==a)return a}for(s=this._conditionOr.length,l=r.length,h=s>l?s:l,u=0;h>u;u+=1){if(i=this._conditionOr[u],o=r[u],!i)return-1;if(!o)return 1;if(a=i.compareTo(o),0!==a)return a}return 0},s.prototype.removePrefixes=function(t){var e=null,n=null,r=0,i=0;if(null===t||void 0===t||!Array.isArray(t)||0===t.length)return this;for(e=new RegExp("^("+t.join("|")+")."),r=0,i=this._conditionAnd.length;i>r;r+=1)n=this._conditionAnd[r],n.criteria instanceof s?n.criteria.removePrefixes(t):(n.left_key=n.left_key.replace(e,""),"key"===n.key_type&&(n.right_key[0]=n.right_key[0].replace(e,"")));for(r=0,i=this._conditionOr.length;i>r;r+=1)n=this._conditionOr[r],n.criteria instanceof s?n.criteria.removePrefixes(t):(n.left_key=n.left_key.replace(e,""),"key"===n.key_type&&(n.right_key[0]=n.right_key[0].replace(e,"")));return this},e.Kriteria=s,n.Kriteria=s}(this,(0,eval)("this").window||this)},{"./lib/Condition.js":2,"./lib/evaluation.js":3,"./lib/getProperty.js":4,"./lib/matchPrefix.js":5}],2:[function(t,e,n){!function(t){"use strict";var e=function(t,e,n,r,i){this.left_key=t,this.operator=e,this.right_key=Array.isArray(n)||void 0===n||null===n?n:[n],this.key_type=r,this.criteria=i};e.prototype.clone=function(){return new e(this.left_key,this.operator,this.right_key.concat(),this.key_type,this.criteria)},e.prototype.not=function(){switch(this.operator){case"eq":this.operator="ne";break;case"ne":this.operator="eq";break;case"lt":this.operator="ge";break;case"le":this.operator="gt";break;case"gt":this.operator="le";break;case"ge":this.operator="lt";break;case"in":this.operator="not_in";break;case"not_in":this.operator="in";break;case"between":this.operator="not_between";break;case"not_between":this.operator="between";break;case"match":this.operator="not_match";break;case"not_match":this.operator="match"}return this},e.prototype.normalize=function(){var t=[],n=0,r=0;if("value"===this.key_type)switch(this.operator){case"in":for(n=0,r=this.right_key.length;r>n;n+=1)t[t.length]=new e(this.left_key,"eq",[this.right_key[n]],this.key_type,null);break;case"not_in":for(n=0,r=this.right_key.length;r>n;n+=1)t[t.length]=new e(this.left_key,"ne",[this.right_key[n]],this.key_type,null);break;case"between":t[t.length]=new e(this.left_key,"ge",[this.right_key[0]],this.key_type,null),t[t.length]=new e(this.left_key,"le",[this.right_key[1]],this.key_type,null);break;case"not_between":t[t.length]=new e(this.left_key,"lt",[this.right_key[0]],this.key_type,null),t[t.length]=new e(this.left_key,"gt",[this.right_key[1]],this.key_type,null);break;default:t[t.length]=this.clone()}else t[t.length]=this.clone();return t},e.prototype.compareTo=function(t){if(this.criteria&&!t.criteria)return 1;if(!this.criteria&&t.criteria)return-1;if(this.criteria&&t.criteria)return this.criteria.compareTo(t.criteria);if(this.left_key>t.left_key)return 1;if(this.left_key<t.left_key)return-1;if(this.operator>t.operator)return 1;if(this.operator<t.operator)return-1;if(this.key_type>t.key_type)return 1;if(this.key_type<t.key_type)return-1;for(var e=0,n=this.right_key.length;n>e;e+=1){if(this.right_key[e]>t.right_key[e])return 1;if(this.right_key[e]<t.right_key[e])return-1}return 0},t.Condition=e}(this)},{}],3:[function(t,e,n){!function(e){"use strict";var n=t("./Condition.js").Condition,r=function(t,e,n){return{eq:{key:function(r){return i(n,t,"eq",e,"key",[r]),n},value:function(r){return i(n,t,"eq",e,"value",[r]),n}},ne:{key:function(r){return i(n,t,"ne",e,"key",[r]),n},value:function(r){return i(n,t,"ne",e,"value",[r]),n}},lt:{key:function(r){return i(n,t,"lt",e,"key",[r]),n},value:function(r){return i(n,t,"lt",e,"value",[r]),n}},le:{key:function(r){return i(n,t,"le",e,"key",[r]),n},value:function(r){return i(n,t,"le",e,"value",[r]),n}},gt:{key:function(r){return i(n,t,"gt",e,"key",[r]),n},value:function(r){return i(n,t,"gt",e,"value",[r]),n}},ge:{key:function(r){return i(n,t,"ge",e,"key",[r]),n},value:function(r){return i(n,t,"ge",e,"value",[r]),n}},"in":{key:function(){return i(n,t,"in",e,"key",[arguments[0]]),n},value:function(){return i(n,t,"in",e,"value",Array.isArray(arguments[0])?arguments[0]:[].slice.apply(arguments)),n}},not_in:{key:function(){return i(n,t,"not_in",e,"key",[arguments[0]]),n},value:function(){return i(n,t,"not_in",e,"value",Array.isArray(arguments[0])?arguments[0]:[].slice.apply(arguments)),n}},between:function(r,o){return i(n,t,"between",e,"value",[r,o]),n},not_between:function(r,o){return i(n,t,"not_between",e,"value",[r,o]),n},match:function(r){var o=r instanceof RegExp?r:null===r?null:void 0===r?void 0:""===r?"":new RegExp(r);return i(n,t,"match",e,"value",[o]),n},not_match:function(r){var o=r instanceof RegExp?r:null===r?null:void 0===r?void 0:""===r?"":new RegExp(r);return i(n,t,"not_match",e,"value",[o]),n}}},i=function(t,e,r,i,o,a){if("and"===e.toLowerCase())t.addAnd(new n(i,r,a,o,null));else{if("or"!==e.toLowerCase())throw new Error("invalid type: "+e+"(at key_name:"+i+", key_type: "+o+", operator:"+r+")");t.addOr(new n(i,r,a,o,null))}};e.evaluation=r}(this)},{"./Condition.js":2}],4:[function(t,e,n){!function(t){"use strict";var e=function(t,e){for(var n=e.split("."),r=t,i=0,o=n.length;o>i;i+=1){if("string"==typeof r||r instanceof String||"number"==typeof r||r instanceof Number)return;if(!(n[i]in r))return;r=r[n[i]]}return r};t.getProperty=e}(this)},{}],5:[function(t,e,n){!function(t){"use strict";var e=function(t,e){if(0===e.length)return!0;for(var n=0,r=e.length;r>n;n+=1)if(0===t.indexOf(e[n]+"."))return!0;return!1};t.matchPrefix=e}(this)},{}]},{},[1]);