!function t(e,n,r){function i(s,a){if(!n[s]){if(!e[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(o)return o(s,!0);var f=new Error("Cannot find module '"+s+"'");throw f.code="MODULE_NOT_FOUND",f}var h=n[s]={exports:{}};e[s][0].call(h.exports,function(t){var n=e[s][1][t];return i(n?n:t)},h,h.exports,t,e,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(t,e,n){!function(e,n){"use strict";var r=t("./lib/getProperty.js").getProperty,i=t("./lib/matchPrefix.js").matchPrefix,o=t("./lib/Condition.js").Condition,s=t("./lib/evaluation.js").evaluation,a=t("./lib/keys_reference.js").keysReference,l=function(){this._conditionAnd=[],this._conditionOr=[],this._not_flg=!1};l._name_="Kriteria",l.prototype.getConditionAnd=function(){return this._conditionAnd},l.prototype.getConditionOr=function(){return this._conditionOr},l._JS_OPERATOR={eq:"===",ne:"!==",lt:"<",le:"<=",gt:">",ge:">="},l.prototype.addAnd=function(t){this._conditionAnd[this._conditionAnd.length]=t},l.prototype.addOr=function(t){this._conditionOr[this._conditionOr.length]=t},l.prototype.and=function(t){var e=typeof t,n=null;if("string"===e||t instanceof String||"number"===e||t instanceof Number)return s("and",t,this);if(t instanceof l)return n=t,this.addAnd(new o("","",[],"",n)),this;if("function"==typeof t)return n=new l,t(n),this.addAnd(new o("","",[],"",n)),this;throw new Error("invalid type of argument. ("+e+")")},l.prototype.or=function(t){var e=typeof t,n=null;if("string"===e||t instanceof String||"number"===e||t instanceof Number)return s("or",t,this);if(t instanceof l)return n=t,this.addOr(new o("","",[],"",n)),this;if("function"==typeof t)return n=new l,t(n),this.addOr(new o("","",[],"",n)),this;throw new Error("invalid type of argument. ("+e+")")},l.prototype.not=function(){return this._not_flg=!this._not_flg,this},l.parse=function(t){var e=new l,n="";for(n in t.and)e.addAnd(t.and[n]);for(n in t.or)e.andOr(t.or[n]);return t.not&&e.not(),e},l.prototype.match=function(t){var e=0,n=0,i=0,o=0,s="",a="",f=[],h="",u=null,c=[],_=!1,y=null,d=null;for(e=0,n=this._conditionAnd.length;e<n;e+=1)if(y=this._conditionAnd[e],y.criteria instanceof l){if(_=y.criteria.match(t),!_)break}else{if(s=y.left_key,a=y.operator,f=y.right_key,h=y.key_type,u=r(t,s),"value"===h)c=f;else if("key"===h)if(d=r(t,f[0]),Array.isArray(d))if("match"===a||"not_match"===a)for(c=[],i=0,o=d.length;i<o;i+=1)null===d[i]||void 0===d[i]||""===d[i]?c[i]=d[i]:c[i]=new RegExp(d[i]);else c=d;else c="match"===a||"not_match"===a?null===d||void 0===d||""===d?d:[new RegExp(d)]:[d];if(_=void 0!==c&&!~c.indexOf(void 0)&&void 0!==u&&this._compare(u,a,c),!_)break}if(_)return!!(!0^this._not_flg);for(e=0,n=this._conditionOr.length;e<n;e+=1)if(y=this._conditionOr[e],y.criteria instanceof l){if(_=y.criteria.match(t))return!!(!0^this._not_flg)}else{if(s=y.left_key,a=y.operator,f=y.right_key,h=y.key_type,u=r(t,s),"value"===h)c=f;else if("key"===h)if(d=r(t,f[0]),Array.isArray(d))if("match"===a||"not_match"===a)for(c=[],i=0,o=d.length;i<o;i+=1)null===d[i]||void 0===d[i]||""===d[i]?c[i]=d[i]:c[i]=new RegExp(d[i]);else c=d;else c="match"===a||"not_match"===a?null===d||void 0===d||""!==d?d:[new RegExp(d)]:[d];if(_=void 0!==c&&!~c.indexOf(void 0)&&void 0!==u&&this._compare(u,a,c))return!!(!0^this._not_flg)}return!!(!1^this._not_flg)},l.prototype._compare=function(t,e,n){var r=!1;switch(e){case"eq":r=n[0]===t;break;case"ne":r=n[0]!==t;break;case"lt":r=n[0]>t;break;case"le":r=n[0]>=t;break;case"gt":r=n[0]<t;break;case"ge":r=n[0]<=t;break;case"in":r=!!~n.indexOf(t);break;case"not_in":r=!~n.indexOf(t);break;case"between":r=n[0]<=t&&n[1]>=t;break;case"not_between":r=n[0]>t||n[1]<t;break;case"match":r=null===n[0]?null===t||void 0===t:null!==t&&(""===n[0]?""===t:n[0].test(t));break;case"not_match":r=null===n[0]?null!==t&&void 0!==t:null===t||(""===n[0]?""!==t:!n[0].test(t))}return r},l.prototype.matcher=function(){return new Function("$","return "+this._createMatchingExpression())},l.prototype._createMatchingExpression=function(){var t=0,e=0,n=[],r=[],i="",o="",s=null,a="";for(t=0,e=this._conditionAnd.length;t<e;t+=1)s=this._conditionAnd[t],s.criteria instanceof l?n[n.length]="("+s.criteria._createMatchingExpression()+")":n[n.length]=this._createExpression(s);for(t=0,e=this._conditionOr.length;t<e;t+=1)s=this._conditionOr[t],s.criteria instanceof l?r[r.length]="("+s.criteria._createMatchingExpression()+")":r[r.length]=this._createExpression(s);return i=n.join(" && "),o=r.join(" || "),i&&o?a=i+" || "+o+" ":o?i||(a=o):a=i,this._not_flg&&(a="!("+a+")"),a},l.prototype._createExpression=function(t){return"("+this._createJsExpressionOfKeyIsNotUndefined(t.left_key)+" && "+("key"===t.key_type?this._createJsExpressionOfKeyIsNotUndefined(t.right_key[0])+" && ":"")+this._createJsExpression(t)+")"},l.prototype._createJsExpression=function(t){var e=a("$",t.left_key.split(".")),n=t.operator,r=t.right_key,i=t.key_type,o=l._JS_OPERATOR[n],s=a("$",r[0]).toString();return o?e+" "+o+" "+this._toStringExpressionFromValue(r[0],i):"in"===n?"value"===i?"!!~"+this._toStringExpressionFromArray(r)+".indexOf("+e+")":"(Array.isArray("+s+") ? !!~"+s+".indexOf("+e+"): "+s+" === "+e+")":"not_in"===n?"value"===i?"!~"+this._toStringExpressionFromArray(r)+".indexOf("+e+")":"(Array.isArray("+s+") ? !~"+s+".indexOf("+e+"): "+s+" !== "+e+")":"between"===n?e+" >= "+this._toStringExpressionFromValue(r[0],i)+" && "+e+" <= "+this._toStringExpressionFromValue(r[1],i):"not_between"===n?e+" < "+this._toStringExpressionFromValue(r[0],i)+" || "+e+" > "+this._toStringExpressionFromValue(r[1],i):"match"===n?void 0!==r[0]&&(null===r[0]?"("+e+" === null ? true : false)":""===r[0]?"("+e+" === '' ? true : false)":"("+r[0]+".test("+e+"))"):"not_match"===n?void 0!==r[0]&&(null===r[0]?"("+e+" === null ? false : true)":""===r[0]?"("+e+" === '' ? false : true)":"(!"+r[0]+".test("+e+"))"):null},l.prototype._createJsExpressionOfKeyIsNotUndefined=function(t){for(var e=t.split("."),n=[],r=[],i=0,o=e.length;i<o;i+=1)n[n.length]=e[i],r[r.length]=a("$",n).toString()+" !== void 0";return r.join(" && ")},l.prototype._createJSExpressionOfKeyIsUndefined=function(t){for(var e=t.split("."),n=[],r=[],i=0,o=e.length;i<o;i+=1){n[n.length]=e[i];var s=a("$",n);r[r.length]=s+" === void 0",r[r.length]=s+" === null"}return r.join(" || ")},l.prototype._toStringExpressionFromArray=function(t){for(var e=[],n=0,r=t.length;n<r;n+=1)e[e.length]=this._toStringExpressionFromValue(t[n],"value");return"["+e.join(", ")+"]"},l.prototype._toStringExpressionFromValue=function(t,e){return"value"===e&&("string"==typeof t||t instanceof String)?'"'+t+'"':"key"===e?a("$",t.split(".")).toString():t+""},l.prototype.splitByKeyPrefixes=function(t){if(!Array.isArray(t)||0===t.length)return null;var e={},n=null,r=null,o=[],s="",a="",f="",h=!0,u=!0,c=!0,_="",y=0,d=0,p=0,g=0;for(y=0,d=t.length;y<d;y+=1)e[t[y]]=new l;for(e["else"]=new l,y=0,d=this._conditionAnd.length;y<d;y+=1)if(n=this._conditionAnd[y],n.criteria instanceof l){r=n.criteria.splitByKeyPrefixes(t);for(_ in r)null!==r[_]&&e[_].and(r[_])}else{for(o=[],s=n.left_key,a=n.right_key[0],f=n.key_type,c=!1,p=0,g=t.length;p<g;p+=1)if(o[o.length]=t[p],h=i(s,o),"key"===f&&(u=i(a,o)),"value"===f&&h||"key"===f&&h&&u){e[t[p]].addAnd(n),c=!0;break}c||e["else"].addAnd(n)}for(y=0,d=this._conditionOr.length;y<d;y+=1)if(n=this._conditionOr[y],n.criteria instanceof l){r=n.criteria.splitByKeyPrefixes(t);for(_ in r)null!==r[_]&&e[_].or(r[_])}else{for(o=[],s=n.left_key,a=n.right_key[0],f=n.key_type,c=!1,p=0,g=t.length;p<g;p+=1)if(o[o.length]=t[p],h=i(s,o),"key"===f&&(u=i(a,o)),"value"===f&&h||"key"===f&&h&&u){e[t[p]].addOr(n),c=!0;break}c||e["else"].addOr(n)}for(_ in e)e[_].getConditionAnd().length>0||e[_].getConditionOr().length>0?e[_]._not_flg=this._not_flg:e[_]=null;return e},l.prototype.merge=function(t,e){var n=new l,r=t.getConditionAnd(),i=t.getConditionOr(),o=null,s=!1,a=0,f=0,h=0,u=0;if(this._not_flg!==t._not_flg)throw new Error("Kriteria#merge - collision to not flag.");for(a=0,f=this._conditionAnd.length;a<f;a+=1)n.addAnd(this._conditionAnd[a]);for(a=0,f=this._conditionOr.length;a<f;a+=1)n.addOr(this._conditionOr[a]);if(e){for(a=0,f=r.length;a<f;a+=1){for(o=r[a],s=!1,h=0,u=this._conditionAnd.length;h<u;h+=1)if(0===o.compareTo(this._conditionAnd[h])){s=!0;break}s||n.addAnd(o)}for(a=0,f=i.length;a<f;a+=1){for(o=i[a],s=!1,h=0,u=this._conditionOr.length;h<u;h+=1)if(0===o.compareTo(this._conditionOr[h])){s=!0;break}s||n.addOr(o)}}else{for(a=0,f=r.length;a<f;a+=1)n.addAnd(r[a]);for(a=0,f=i.length;a<f;a+=1)n.addOr(i[a])}return n},l.prototype.compareTo=function(t){var e=function(t,e){return t.compareTo(e)},n=t.getConditionAnd(),r=t.getConditionOr(),i=null,o=null,s=!0,a=0,l=0,f=0,h=0;if(this._conditionAnd.sort(e),n.sort(e),this._conditionOr.sort(e),r.sort(e),this._not_flg&&!t._not_flg)return-1;if(!this._not_flg&&t._not_flg)return 1;for(a=this._conditionAnd.length,l=n.length,h=a>l?a:l,f=0;f<h;f+=1){if(i=this._conditionAnd[f],o=n[f],!i)return-1;if(!o)return 1;if(s=i.compareTo(o),0!==s)return s}for(a=this._conditionOr.length,l=r.length,h=a>l?a:l,f=0;f<h;f+=1){if(i=this._conditionOr[f],o=r[f],!i)return-1;if(!o)return 1;if(s=i.compareTo(o),0!==s)return s}return 0},l.prototype.removePrefixes=function(t){var e=null,n=null,r=0,i=0;if(null===t||void 0===t||!Array.isArray(t)||0===t.length)return this;for(e=new RegExp("^("+t.join("|")+")."),r=0,i=this._conditionAnd.length;r<i;r+=1)n=this._conditionAnd[r],n.criteria instanceof l?n.criteria.removePrefixes(t):(n.left_key=n.left_key.replace(e,""),"key"===n.key_type&&(n.right_key[0]=n.right_key[0].replace(e,"")));for(r=0,i=this._conditionOr.length;r<i;r+=1)n=this._conditionOr[r],n.criteria instanceof l?n.criteria.removePrefixes(t):(n.left_key=n.left_key.replace(e,""),"key"===n.key_type&&(n.right_key[0]=n.right_key[0].replace(e,"")));return this},e.Kriteria=l,n.Kriteria=l}(this,(0,eval)("this").window||this)},{"./lib/Condition.js":2,"./lib/evaluation.js":3,"./lib/getProperty.js":4,"./lib/keys_reference.js":5,"./lib/matchPrefix.js":6}],2:[function(t,e,n){!function(t){"use strict";var e=function(t,e,n,r,i){this.left_key=t,this.operator=e,this.right_key=Array.isArray(n)||void 0===n||null===n?n:[n],this.key_type=r,this.criteria=i};e.prototype.clone=function(){return new e(this.left_key,this.operator,this.right_key.concat(),this.key_type,this.criteria)},e.prototype.not=function(){switch(this.operator){case"eq":this.operator="ne";break;case"ne":this.operator="eq";break;case"lt":this.operator="ge";break;case"le":this.operator="gt";break;case"gt":this.operator="le";break;case"ge":this.operator="lt";break;case"in":this.operator="not_in";break;case"not_in":this.operator="in";break;case"between":this.operator="not_between";break;case"not_between":this.operator="between";break;case"match":this.operator="not_match";break;case"not_match":this.operator="match"}return this},e.prototype.normalize=function(){var t=[],n=0,r=0;if("value"===this.key_type)switch(this.operator){case"in":for(n=0,r=this.right_key.length;n<r;n+=1)t[t.length]=new e(this.left_key,"eq",[this.right_key[n]],this.key_type,null);break;case"not_in":for(n=0,r=this.right_key.length;n<r;n+=1)t[t.length]=new e(this.left_key,"ne",[this.right_key[n]],this.key_type,null);break;case"between":t[t.length]=new e(this.left_key,"ge",[this.right_key[0]],this.key_type,null),t[t.length]=new e(this.left_key,"le",[this.right_key[1]],this.key_type,null);break;case"not_between":t[t.length]=new e(this.left_key,"lt",[this.right_key[0]],this.key_type,null),t[t.length]=new e(this.left_key,"gt",[this.right_key[1]],this.key_type,null);break;default:t[t.length]=this.clone()}else t[t.length]=this.clone();return t},e.prototype.compareTo=function(t){if(this.criteria&&!t.criteria)return 1;if(!this.criteria&&t.criteria)return-1;if(this.criteria&&t.criteria)return this.criteria.compareTo(t.criteria);if(this.left_key>t.left_key)return 1;if(this.left_key<t.left_key)return-1;if(this.operator>t.operator)return 1;if(this.operator<t.operator)return-1;if(this.key_type>t.key_type)return 1;if(this.key_type<t.key_type)return-1;for(var e=0,n=this.right_key.length;e<n;e+=1){if(this.right_key[e]>t.right_key[e])return 1;if(this.right_key[e]<t.right_key[e])return-1}return 0},t.Condition=e}(this)},{}],3:[function(t,e,n){!function(e){"use strict";var n=t("./Condition.js").Condition,r=function(t,e,n){return{eq:{key:function(r){return i(n,t,"eq",e,"key",[r]),n},value:function(r){return i(n,t,"eq",e,"value",[r]),n}},ne:{key:function(r){return i(n,t,"ne",e,"key",[r]),n},value:function(r){return i(n,t,"ne",e,"value",[r]),n}},lt:{key:function(r){return i(n,t,"lt",e,"key",[r]),n},value:function(r){return i(n,t,"lt",e,"value",[r]),n}},le:{key:function(r){return i(n,t,"le",e,"key",[r]),n},value:function(r){return i(n,t,"le",e,"value",[r]),n}},gt:{key:function(r){return i(n,t,"gt",e,"key",[r]),n},value:function(r){return i(n,t,"gt",e,"value",[r]),n}},ge:{key:function(r){return i(n,t,"ge",e,"key",[r]),n},value:function(r){return i(n,t,"ge",e,"value",[r]),n}},"in":{key:function(){return i(n,t,"in",e,"key",[arguments[0]]),n},value:function(){return i(n,t,"in",e,"value",Array.isArray(arguments[0])?arguments[0]:[].slice.apply(arguments)),n}},not_in:{key:function(){return i(n,t,"not_in",e,"key",[arguments[0]]),n},value:function(){return i(n,t,"not_in",e,"value",Array.isArray(arguments[0])?arguments[0]:[].slice.apply(arguments)),n}},between:function(r,o){return i(n,t,"between",e,"value",[r,o]),n},not_between:function(r,o){return i(n,t,"not_between",e,"value",[r,o]),n},match:function(r){var o=r instanceof RegExp?r:null===r?null:void 0===r?void 0:""===r?"":new RegExp(r);return i(n,t,"match",e,"value",[o]),n},not_match:function(r){var o=r instanceof RegExp?r:null===r?null:void 0===r?void 0:""===r?"":new RegExp(r);return i(n,t,"not_match",e,"value",[o]),n}}},i=function(t,e,r,i,o,s){if("and"===e.toLowerCase())t.addAnd(new n(i,r,s,o,null));else{if("or"!==e.toLowerCase())throw new Error("invalid type: "+e+"(at key_name:"+i+", key_type: "+o+", operator:"+r+")");t.addOr(new n(i,r,s,o,null))}};e.evaluation=r}(this)},{"./Condition.js":2}],4:[function(t,e,n){!function(t){"use strict";var e=function(t,e){for(var n=e.split("."),r=t,i=0,o=n.length;i<o;i+=1){if("string"==typeof r||r instanceof String||"number"==typeof r||r instanceof Number)return;if(!(n[i]in r))return;r=r[n[i]]}return r};t.getProperty=e}(this)},{}],5:[function(t,e,n){!function(t,e){"use strict";var n=function(t){this._target=t,this._q="'",this._keys=[]};n.prototype.toString=function(){for(var t=this._target,e=this._keys,n=this._q,r=0,i=e.length;r<i;r+=1)t=t+"["+n+e[r]+n+"]";return t},n.prototype.setQuote=function(t){i(t)&&(this._q=t)},n.prototype.add=function(t){this._keys[this._keys.length]=t};var r=function(t,e,r){var o=new n(t);if(r&&i(r.q)&&o.setQuote(r.q),Array.isArray(e))for(var s=0,a=e.length;s<a;s+=1)o.add(e[s]);else o.add(e);return o},i=function(t){return"string"==typeof t||t instanceof String};e.keysReference=r}((0,eval)("this"),this)},{}],6:[function(t,e,n){!function(t){"use strict";var e=function(t,e){if(0===e.length)return!0;for(var n=0,r=e.length;n<r;n+=1)if(0===t.indexOf(e[n]+"."))return!0;return!1};t.matchPrefix=e}(this)},{}]},{},[1]);